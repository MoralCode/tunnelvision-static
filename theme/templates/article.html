{% extends "base.html" %}
{% block title %}
{{ article["title"] }} - CampusPulse Access
{% endblock %}
{% block dynamic_content %}

<style>
    .no-a-styles {
        text-decoration: none;
        color: white;
    }

    .img-zoom-container {
        position: relative;
    }

    .img-zoom-lens {
        position: absolute;
        border: 1px solid #d4d4d4;
        /*set the size of the lens:*/
        width: 40px;
        height: 40px;
    }

    .img-zoom-result {
        border: 1px solid #d4d4d4;
        /*set the size of the result div:*/
        width: 300px;
        height: 300px;
    }

    .main-img {
        width: 100%;
        height: 700px;
        object-fit: contain;
    }
</style>
<div class="container">
    <div class="row text-start">
        <div class="col-3">
            <a href="/catalog" class=" text-left"> &lt; back to catalog</a>
        </div>
    </div>

    <h1>{{ article["title"] }} </h1>
    <div class="row">
        <div class="col-lg-8 col-md-12">
            <div id="muralImagesCaptions" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    {% for title, gallery in article.photo_gallery %}
                    {% if loop.index == 1 %}
                    <button type="button" data-bs-target="muralImagesCaptions" data-bs-slide-to="{{ loop.index-1 }}" class="active" aria-current="true" aria-label="Slide {{ loop.index-1 }}"></button>
                    {% else %}
                    <button type="button" data-bs-target="muralImagesCaptions" data-bs-slide-to="{{ loop.index-1 }}" aria-label="Slide {{ loop.index-1 }}"></button>
                    {% endif %}
                    {% endfor %}
                </div>
                <div class="carousel-inner">
                    
                    {% for gallery_title, gallery in article.photo_gallery %}
                    {% for (filename, photo, thumb, exif, caption) in gallery %}
                    {% if loop.index == 1 %}
                    <div class="carousel-item active">
                    {% else %}
                    <div class="carousel-item text-center">
                    {% endif %}
                        <img class="main-img" alt="{{ caption }}" src="{{ SITEURL }}/{{ photo }}">
                        <div class="carousel-caption d-none d-md-block banner-value">
                            {% if caption != None %}
                            <p class="no-a-styles">{{ caption }}</p>
                            {% endif %}
                            <p style="font-family:inherit;font-size:inherit;text-wrap:wrap">
                                {% if exif != None %}{{ exif }}{% endif %}<br>
                                {% if photo %}<a class="no-a-styles" href="{{ SITEURL }}/{{ photo }}">View Full Size Image</a>{% endif %}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                    {% endfor %}
                    </div>

                    {% if gallery|length > 1 %}
                    <button class="carousel-control-prev" type="button" data-bs-target="#muralImagesCaptions" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#muralImagesCaptions" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-4 col-md-12">
       
                {% if article.content != '' %}
                <h3>Description:</h3>
                <pre style="font-family:inherit;font-size:inherit; text-wrap:wrap">{{ article.content }} </pre>
                {% endif %}

                <h3>Location:</h3>
                <p>
                    <strong>Building</strong>: {{ article["building_name"] }} <br>
                    {% if article["location_info"] %}<strong>Location Description</strong>: {{ article["location_info"] }}
                    <br>{% endif %}
                    {% if article["floor"] %}<strong>Floor</strong>: {{ article["floor"] }}
                    <br>{% endif %}
                    {% if article["door_count"] %}<strong>Doors</strong>: {{ article["door_count"] }}
                    <br>{% endif %}
                    <strong>Room</strong>: {{ article["room"] }}<br>
                    <strong>Status Last Updated</strong>: {{ article["status_updated"] }}<br>
                </p>


                {% if article['tags']|length > 0 %}
                <h3>Tags:</h3>
                {% for tag in article['tags']: %}
                <a href="/tags?t={{ tag }}">
                    <p class="chip">{{ tag }}</p>
                </a>
                {% endfor %}
                {% endif %}

                {% if article["remarks"] %}
                <div class="accordion" id="remarkdropdown">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="remarkheading" title="Remarks can provide additional information about a piece, including details sourced from suggestions, conversations, and other casual sources.">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#remarkcollapse" aria-controls="remarkcollapse">
                                Remarks
                            </button>
                        </h2>
                        <div id="remarkcollapse" class="accordion-collapse collapse" aria-labelledby="remarkheading" data-bs-parent="#remarkdropdown">
                            <div class="accordion-body">
                                <div class="container">
                                    <pre style="font-family:inherit;font-size:inherit;text-wrap:wrap">{{ article['remarks'] }}</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

                <a href="{{ article['report_url'] }}" target="_blank">
                    <button type="button" class="btn btn-primary">Report issue</button>
                </a>
            </div>
        </div>
    </div>

    {% endblock %}